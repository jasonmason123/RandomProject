import{u as y,T as C,r as m,E as S,F as k,G as h,P as A,Q as F,J as R,j as s,L as E,K as i,B as p}from"./index-B9nS6S8q.js";import{B as I}from"./common-CgraHF7X.js";import{a as L}from"./authentication-api-caller-TsD-gHrN.js";import{u as T}from"./useTranslation-DvKfDV_k.js";import{I as o}from"./InputGroup-OJcgSMOE.js";const G=()=>{const w=y(),{c:u}=C(),[n]=T(),[x,f]=m.useState(!1),[d,t]=m.useState(!1),j=async(r,P)=>{try{t(!0),(await L.resetPassword(r,P)).ok?(f(!0),new Promise(N=>setTimeout(N,3e3)).then(()=>{w("/login")})):p.error("Something went wrong.")}catch{p.error("An error occurred. Please try again later.")}finally{t(!1)}},{handleChange:c,values:l,handleSubmit:g,touched:a,errors:e,submitForm:b}=S({initialValues:{password:"",confirmPassword:""},validationSchema:k({password:h().min(8,"Must be 8 characters or more").max(30,"Must be 30 characters or less").test("is-strong-password",'Password must have at least 1 uppercase letter, 1 lowercase letter, 1 number, and 1 special character (! @ # $ % ^ & * ( ) , . ? " : { } | < >)',r=>r?A(r):!1).required("Required"),confirmPassword:h().min(8,"Must be 8 characters or more").max(30,"Must be 30 characters or less").oneOf([F("password")],"Passwords must match").required("Required")}),onSubmit:async r=>{await j(u,r.password)}});return R("hold-transition login-page"),s.jsx("div",{className:"login-box",children:s.jsxs("div",{className:"card card-outline card-primary",children:[s.jsx("div",{className:"card-header text-center",children:s.jsx(E,{to:"/",className:"h1",children:s.jsx("b",{children:"CodLUCK"})})}),s.jsx("div",{className:"card-body",children:x?s.jsx("p",{className:"login-box-msg",children:"Your password has been reset successfully, please login again after being redirected..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"login-box-msg",children:n("recover.oneStepAway")}),s.jsxs("form",{onSubmit:g,children:[s.jsx("div",{className:"mb-3",children:s.jsxs(o,{className:"mb-3",children:[s.jsx(i.Control,{id:"password",name:"password",type:"password",placeholder:"Password",onChange:c,value:l.password,disabled:d,isValid:a.password&&!e.password,isInvalid:a.password&&!!e.password}),a.password&&e.password?s.jsx(i.Control.Feedback,{type:"invalid",children:e.password}):s.jsx(o.Append,{children:s.jsx(o.Text,{children:s.jsx("i",{className:"fas fa-lock"})})})]})}),s.jsx("div",{className:"mb-3",children:s.jsxs(o,{className:"mb-3",children:[s.jsx(i.Control,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm password",onChange:c,value:l.confirmPassword,disabled:d,isValid:a.confirmPassword&&!e.confirmPassword,isInvalid:a.confirmPassword&&!!e.confirmPassword}),a.confirmPassword&&e.confirmPassword?s.jsx(i.Control.Feedback,{type:"invalid",children:e.confirmPassword}):s.jsx(o.Append,{children:s.jsx(o.Text,{children:s.jsx("i",{className:"fas fa-lock"})})})]})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx(I,{onClick:b,children:n("recover.changePassword")})})})]})]})})]})})};export{G as default};
