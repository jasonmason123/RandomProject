import{q as y,J as C,r as m,G as S,E as k,j as s,L as A,B as h}from"./index-DdHUMgm0.js";import{u as F,c as R,a as p,d as q,I as o,F as i}from"./InputGroup-CeoBAgZk.js";import{B as E}from"./common-DOkR66UH.js";import{a as I}from"./authentication-api-caller-TsD-gHrN.js";import{u as L}from"./useTranslation-CF2MTt9i.js";import"./index-NQ4ToruW.js";const W=()=>{const w=y(),{c:u}=C(),[n]=L(),[x,f]=m.useState(!1),[d,t]=m.useState(!1),j=async(r,P)=>{try{t(!0),(await I.resetPassword(r,P)).ok?(f(!0),new Promise(N=>setTimeout(N,3e3)).then(()=>{w("/login")})):h.error("Something went wrong.")}catch{h.error("An error occurred. Please try again later.")}finally{t(!1)}},{handleChange:c,values:l,handleSubmit:g,touched:e,errors:a,submitForm:b}=F({initialValues:{password:"",confirmPassword:""},validationSchema:R({password:p().min(8,"Must be 8 characters or more").max(30,"Must be 30 characters or less").test("is-strong-password",'Password must have at least 1 uppercase letter, 1 lowercase letter, 1 number, and 1 special character (! @ # $ % ^ & * ( ) , . ? " : { } | < >)',r=>r?S(r):!1).required("Required"),confirmPassword:p().min(8,"Must be 8 characters or more").max(30,"Must be 30 characters or less").oneOf([q("password")],"Passwords must match").required("Required")}),onSubmit:async r=>{await j(u,r.password)}});return k("hold-transition login-page"),s.jsx("div",{className:"login-box",children:s.jsxs("div",{className:"card card-outline card-primary",children:[s.jsx("div",{className:"card-header text-center",children:s.jsx(A,{to:"/",className:"h1",children:s.jsx("b",{children:"CodLUCK"})})}),s.jsx("div",{className:"card-body",children:x?s.jsx("p",{className:"login-box-msg",children:"Your password has been reset successfully, please login again after being redirected..."}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"login-box-msg",children:n("recover.oneStepAway")}),s.jsxs("form",{onSubmit:g,children:[s.jsx("div",{className:"mb-3",children:s.jsxs(o,{className:"mb-3",children:[s.jsx(i.Control,{id:"password",name:"password",type:"password",placeholder:"Password",onChange:c,value:l.password,disabled:d,isValid:e.password&&!a.password,isInvalid:e.password&&!!a.password}),e.password&&a.password?s.jsx(i.Control.Feedback,{type:"invalid",children:a.password}):s.jsx(o.Append,{children:s.jsx(o.Text,{children:s.jsx("i",{className:"fas fa-lock"})})})]})}),s.jsx("div",{className:"mb-3",children:s.jsxs(o,{className:"mb-3",children:[s.jsx(i.Control,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm password",onChange:c,value:l.confirmPassword,disabled:d,isValid:e.confirmPassword&&!a.confirmPassword,isInvalid:e.confirmPassword&&!!a.confirmPassword}),e.confirmPassword&&a.confirmPassword?s.jsx(i.Control.Feedback,{type:"invalid",children:a.confirmPassword}):s.jsx(o.Append,{children:s.jsx(o.Text,{children:s.jsx("i",{className:"fas fa-lock"})})})]})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx(E,{onClick:b,children:n("recover.changePassword")})})})]})]})})]})})};export{W as default};
